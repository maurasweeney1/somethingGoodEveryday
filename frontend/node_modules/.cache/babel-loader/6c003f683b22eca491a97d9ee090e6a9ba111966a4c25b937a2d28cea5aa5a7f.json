{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{v4 as uuidv4}from\"uuid\";import logo from\"./logo.png\";import\"./postPage.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AddPostPage(_ref){let{addNewPost,userId}=_ref;const navigate=useNavigate();const[category,setCategory]=useState(\"\");const[title,setTitle]=useState(\"\");const[text,setText]=useState(\"\");const[link,setLink]=useState(\"\");const[image,setImage]=useState(null);const[error,setError]=useState(\"\");const handleTitle=e=>{if(e.target.value.length>0){setTitle(e.target.value);}};const handleText=e=>{// Character limit = 200\nif(e.target.value.length<=200){setText(e.target.value);}};const handleImage=e=>{const file=e.target.files[0];if(!file)return;const allowedTypes=[\"image/jpeg\",\"image/png\",\"image/jpg\"];const maxFileSize=10*1024*1024;if(!allowedTypes.includes(file.type)){setError(\"Unsupported file type. Please upload a JPEG, JPG, or PNG image.\");return;}if(file.size>maxFileSize){setError(\"File size exceeds the limit of 10MB.\");return;}setImage({file,previewUrl:URL.createObjectURL(file)});setError(\"\");};const handleSubmit=e=>{e.preventDefault();let error=\"\";const finalCategory=category===\"\"?\"General\":category;if(title.trim().length===0){error+=\"Title is required\\n\";}if(text.trim().length===0&&!image&&link.trim().length===0){error+=\"Post content is required\\n\";}if(error){setError(error.trim());return;// exit if there are errors\n}const newPost={id:uuidv4(),category:finalCategory,title,text,image:image?image.file:null,link,likes:0,likedBy:[],datePosted:new Date().toISOString(),user:userId};addNewPost(newPost);navigate(\"/home\");};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"header\",{className:\"new-post-header\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"home-button\",onClick:()=>navigate(\"/home\"),children:\"\\u2190\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:logo,className:\"App-logo\",alt:\"logo\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{children:\"Something Good Everyday\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"new-post\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Add a New Post\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Choose a Category:\",/*#__PURE__*/_jsxs(\"select\",{value:category,onChange:e=>setCategory(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"General\",children:\"General\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Quotes\",children:\"Quotes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Stories\",children:\"Stories\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Advice\",children:\"Advice\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Images\",children:\"Images\"})]})]})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"textarea\",{value:title,onChange:handleTitle,rows:\"2\",cols:\"50\",placeholder:\"Add title...\"})})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Write Your Post (Max 200 characters):\",/*#__PURE__*/_jsx(\"textarea\",{value:text,onChange:handleText,rows:\"6\",cols:\"50\",placeholder:\"Type your text here...\"})]})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Add a Link:\",/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:link,onChange:e=>setLink(e.target.value),placeholder:\"https://example.com\"})]})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Add an Image:\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImage})]})}),/*#__PURE__*/_jsx(\"p\",{children:image&&image.previewUrl&&/*#__PURE__*/_jsx(\"img\",{src:image.previewUrl,alt:\"Preview\",style:{width:\"200px\",marginTop:\"10px\"}})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit Post\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\",whiteSpace:\"pre-line\"},children:error})]})]})]});}export default AddPostPage;","map":{"version":3,"names":["React","useState","useNavigate","v4","uuidv4","logo","jsx","_jsx","jsxs","_jsxs","AddPostPage","_ref","addNewPost","userId","navigate","category","setCategory","title","setTitle","text","setText","link","setLink","image","setImage","error","setError","handleTitle","e","target","value","length","handleText","handleImage","file","files","allowedTypes","maxFileSize","includes","type","size","previewUrl","URL","createObjectURL","handleSubmit","preventDefault","finalCategory","trim","newPost","id","likes","likedBy","datePosted","Date","toISOString","user","children","className","onClick","src","alt","onSubmit","onChange","rows","cols","placeholder","accept","style","width","marginTop","color","whiteSpace"],"sources":["/Users/maurasweeney/Desktop/CS/CPSC332/cpsc-332-web-dev-final-project-maurasweeney1/frontend/src/AddPosts.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport logo from \"./logo.png\";\nimport \"./postPage.css\";\n\nfunction AddPostPage({ addNewPost, userId }) {\n  const navigate = useNavigate();\n  const [category, setCategory] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [text, setText] = useState(\"\");\n  const [link, setLink] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [error, setError] = useState(\"\");\n\n  const handleTitle = (e) => {\n    if (e.target.value.length > 0) {\n      setTitle(e.target.value);\n    }\n  };\n\n  const handleText = (e) => {\n    // Character limit = 200\n    if (e.target.value.length <= 200) {\n      setText(e.target.value);\n    }\n  };\n\n  const handleImage = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    const allowedTypes = [\"image/jpeg\", \"image/png\", \"image/jpg\"];\n    const maxFileSize = 10 * 1024 * 1024;\n\n    if (!allowedTypes.includes(file.type)) {\n      setError(\n        \"Unsupported file type. Please upload a JPEG, JPG, or PNG image.\"\n      );\n      return;\n    }\n    if (file.size > maxFileSize) {\n      setError(\"File size exceeds the limit of 10MB.\");\n      return;\n    }\n    setImage({ file, previewUrl: URL.createObjectURL(file) });\n    setError(\"\");\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    let error = \"\";\n\n    const finalCategory = category === \"\" ? \"General\" : category;\n\n    if (title.trim().length === 0) {\n      error += \"Title is required\\n\";\n    }\n\n    if (text.trim().length === 0 && !image && link.trim().length === 0) {\n      error += \"Post content is required\\n\";\n    }\n\n    if (error) {\n      setError(error.trim());\n      return; // exit if there are errors\n    }\n\n    const newPost = {\n      id: uuidv4(),\n      category: finalCategory,\n      title,\n      text,\n      image: image ? image.file : null,\n      link,\n      likes: 0,\n      likedBy: [],\n      datePosted: new Date().toISOString(),\n      user: userId,\n    };\n\n    addNewPost(newPost);\n    navigate(\"/home\");\n  };\n\n  return (\n    <div>\n      <header className=\"new-post-header\">\n        <div>\n          <button className=\"home-button\" onClick={() => navigate(\"/home\")}>\n            ‚Üê\n          </button>\n        </div>\n        <div className=\"title\">\n          <div>\n            <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          </div>\n          <div>\n            <h3>Something Good Everyday</h3>\n          </div>\n        </div>\n      </header>\n      <div className=\"new-post\">\n        <h1>Add a New Post</h1>\n        {/* add a post */}\n        <form onSubmit={handleSubmit}>\n          <p>\n            <label>\n              Choose a Category:\n              <select\n                value={category}\n                onChange={(e) => setCategory(e.target.value)}\n              >\n                <option value=\"\">Select a category</option>\n                <option value=\"General\">General</option>\n                <option value=\"Quotes\">Quotes</option>\n                <option value=\"Stories\">Stories</option>\n                <option value=\"Advice\">Advice</option>\n                <option value=\"Images\">Images</option>\n              </select>\n            </label>\n          </p>\n          <p>\n            <label>\n              <textarea\n                value={title}\n                onChange={handleTitle}\n                rows=\"2\"\n                cols=\"50\"\n                placeholder=\"Add title...\"\n              />\n            </label>\n          </p>\n          <p>\n            <label>\n              Write Your Post (Max 200 characters):\n              <textarea\n                value={text}\n                onChange={handleText}\n                rows=\"6\"\n                cols=\"50\"\n                placeholder=\"Type your text here...\"\n              />\n            </label>\n          </p>\n          <p>\n            <label>\n              Add a Link:\n              <input\n                type=\"url\"\n                value={link}\n                onChange={(e) => setLink(e.target.value)}\n                placeholder=\"https://example.com\"\n              />\n            </label>\n          </p>\n          <p>\n            <label>\n              Add an Image:\n              <input type=\"file\" accept=\"image/*\" onChange={handleImage} />\n            </label>\n          </p>\n          <p>\n            {image && image.previewUrl && (\n              <img\n                src={image.previewUrl}\n                alt=\"Preview\"\n                style={{ width: \"200px\", marginTop: \"10px\" }}\n              />\n            )}\n          </p>\n          <button type=\"submit\">Submit Post</button>\n\n          {error && (\n            <p style={{ color: \"red\", whiteSpace: \"pre-line\" }}>{error}</p>\n          )}\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default AddPostPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}